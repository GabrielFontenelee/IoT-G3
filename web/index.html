<html>
    <head>
        <meta charset="utf-8">
        <title>kajshdkjas</title>
        <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js">
        </script>
        <script type="text/javascript" language="javascript">
            var mqtt;
            var reconnectTimeout = 2000;
            var host = "192.168.1.102";
            var port = 9001;

            function readFromSensor(response){
              console.log("a message was received");
              console.log(response.payloadString);
            }
            

            function onConnect() {
              console.log("Connect sucessfull");
              mqtt.subscribe("test/topic");
              mqtt.onMessageArrived = readFromSensor;
            }

            function MQTTconnect() {
                console.log("Connected to " + host + " " + port);
                mqtt = new Paho.MQTT.Client(host, port, "");
                var options = {
                    timeout: 3,
                    onSuccess: onConnect,
                };
                mqtt.connect(options);
            }


        </script>
    </head>
    <body>
        <script type="text/javascript">MQTTconnect();</script>
    </body>
</html>

